ORG 0000H
AJMP MAIN
ORG 0030H
MAIN:
MOV SP,#60H
SETB P3.0
NEX0:
JB P1.1,NEX1
NEX4:
MOV R0,#1;十位
MOV R1,#2;个位
MOV 30H,R0
MOV 31H,R1
LCALL DISPLAY
SETB P3.0
NEX1:
JB P1.0,NEX0
NEX2:
LCALL DISPLAY
DEC R1
LCALL DL1S
CJNE R1,#0,NEX2
CJNE R0,#0,NEX5
LCALL DISPLAY
LJMP TWINK
NEX5:
LCALL DISPLAY
LCALL DL1S
DEC R0
MOV R1,#9
LJMP NEX2
TWINK:
CLR P3.0
LCALL DL100MS
SETB P3.0
LCALL DL100MS
JB P1.1,TWINK
LJMP NEX4
DL1S:
MOV R7,#10
DL2:MOV R6,#200
DL1:MOV R5,#250
DJNZ R5,$
DJNZ R6,DL1
DJNZ R7,DL2
RET
DL100MS:
MOV R7,#1
DL4:MOV R6,#200
DL3:MOV R5,#250
DJNZ R5,$
DJNZ R6,DL3
DJNZ R7,DL4
RET
DISPLAY:
MOV DPTR,#TABLE
MOV A,R0
MOVC A,@A+DPTR
MOV DPTR,#0FD00H
MOVX @DPTR,A;显示十位
MOV DPTR,#TABLE
MOV A,R1
MOVC A,@A+DPTR
MOV DPTR,#0FE00H
MOVX @DPTR,A;显示个位
RET
SJMP $
TABLE:DB 0C0H,0F9H,0A4H,0B0H,99H
	  DB 92H,82H,0F8H,80H,90H
END