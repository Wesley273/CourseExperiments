ORG 0000H
AJMP MAIN
ORG 0030H
MAIN:
MOV SP,#60H
MOV A,#0FFH
MOV DPTR,#0FE00H
MOVX @DPTR,A
MOV DPTR,#0FD00H
MOVX @DPTR,A
STATE1:
MOV A,#0F3H
MOV DPTR,#0FE00H;利用@DPTR使用MOVX时,P2口输出DPH，P0在输出数据前输出DPL
MOVX @DPTR,A;利用@DPTR使用MOVX时，会在P0口输出数据时使WR端为低电平，配合P2对DPH输出，LE为高电平，74LS373被选通
MOV A,#0CH
MOV DPTR,#0FD00H
MOVX @DPTR,A
LCALL DL10S
STATE2:
MOV A,#0C3H
MOV DPTR,#0FE00H
MOVX @DPTR,A
MOV A,#0FH
MOV DPTR,#0FD00H
MOVX @DPTR,A
LCALL DL2S
STATE3:
MOV A,#0FCH
MOV DPTR,#0FE00H
MOVX @DPTR,A
MOV A,#03H
MOV DPTR,#0FD00H
MOVX @DPTR,A
LCALL DL10S
STATE4:
MOV A,#03CH
MOV DPTR,#0FE00H
MOVX @DPTR,A
MOV A,#0FH
MOV DPTR,#0FD00H
MOVX @DPTR,A
LCALL DL2S
LJMP STATE1
DL10S:
MOV R7,#100
DL2:MOV R6,#200
DL1:MOV R5,#250
DJNZ R5,$
DJNZ R6,DL1
DJNZ R7,DL2
RET
DL2S:
MOV R7,#20
DL4:MOV R6,#200
DL3:MOV R5,#250
DJNZ R5,$
DJNZ R6,DL3
DJNZ R7,DL4
RET
SJMP $
END